---
layout: post
title:  "Day1 is cold and foggy"
date: 2023-11-06 12:07:00 -0000
author: mpagot
---

<a onclick="window.history.back()">Back</a>

This day is mostly dedicated to trace a path: What I want?

# DONE
In Day1 I manage to ...

## HW description

The HW available on my desk is:

 - Topton N5105 Mini-ITX motherboard
 - CPU Jasper Lake Intel® Celeron® Processor N5105 CPU (Base: 2.0Ghz, Burst 2.9Ghz, TDP: 10W)
 - 32GB Ram DDR4 + 16GB DDR4 (as I manage to buy a wrong second stick)
 - 128GB M.2 NVME SSD (after buy not one but two M.2 SATA 120GB disks that, as SATA and not NVME, does not works on the internal M.2 slot on the motherboard!!!)
 - NVMe M.2 500GB disk
 - 3x 4TB spin disks
 - 1x 4T used spin disk

This HW assembled outside its case looks like:

![Image]({{ "/assets/img/IMG_20230923_115142_web.jpg" | relative_url }})

and here with everything squeezed in a nice case:

![Image]({{ "/assets/img/IMG_20231106_175451_web.jpg" | relative_url }})


## Requirements

**Create a family home NAS powered by openSUSE.**

Family requirements:

 - Hey dad the disk is almost full on mum Windows7 laptop, where I can move her documents to install XYZ (SAMBA mount, maybe quota folder)

 - Hey dad where we have my picture of my 6th birthday party? I'm doing a presentation for school using my keyboard computer (PI-500 ARM)

 - Hey dear are we sure we will not loose any of our holiday photos? Should I print all of them? (backup system?)

 - Is the NAS broken? I have signed contract to send in the Documents folder in 5mins (high availability?)

 - Hey dear, there's all the night a box with a blue led blinking in the broom closet. How much we pay for that in electricity?

 - Oh- Oh-Oh I'm Santa Clause : how asked a new 12TB disk and 32GB RAM stick (expand-ability)

### Requirements for eng

Here a more formal list of requirements. At this point the HW part is what it is. So the focus in this list of requirements is more about what I can get by properly selecting and configuring the SW part of the NAS.

#### Data integrity

NAS is mostly used to store all the family "assets":
 - mostly photos both in JPEG and RAW format
 - some videos and audio recording

The most important requirement here is not to loose any bit of them.
In particular I like to protect my digital memory against:
- HW disk failures
- data corruption
- accidental delete, modify, move or rename files

It probably make sense to describe how the media archive is going to be used:
- We periodically add more files.
- We practically never delete old photos.
- Files in this pool are relatively rarely read, it could happens that sometimes we create some projects based on them like some photo book or that we look for an old memory just for fun.

#### Usability

The NAS is mind to sit in a corner, powered H24 (but I can change my mind about it if I manage to obtain a WOL setup) and connected to the main network switch of the house.
Users will need to access it through network from both linux and win machines.
It is better if users can see the data (even just one or multiple subset of it) like it was an internal or external disk. So I suppose I need SAMBA and eventually NFS. I'm not sure what to do about access managements yet.

#### LTS

I like to install and configure an OS and related SW with at least 10 years of support.

#### Low energy

I know, I know: this is more an HW requirement than a SW one.

#### Low maintenance effort

I asked my wife to hire an IT specialist to maintain the storage infrastructure but she say that I should be able to do it from my own :-(

#### Security

The main focus here too is the data integrity. I think it also relevant to consider that I do not need to access my data from outside my home network.
Has to be reasonably simple and safe (from the data integrity point of view) to keep the OS up to date.


### Not so important
Here a list of stuff that I'll not consider important for this project.

#### Backups

For the moment anyone at home is implementing or not implementing a backup strategy from its own.

#### "Hyperdrive" bandwidth

The limiting factor here is probably the network. It if Wifi5 and cable (some CAT5 cables in the sealing connected to some 1GigE switch of PC ports).

#### High availability

I'll not loose money for each minutes of downtime :-). I like the high availability but data integrity is more important.

#### Remote access

I do not need to neither write or read or generally speaking interact with the NAS from outside my home network.

## Experiment on KVM

I made some experiment with KVM to have some fun at the end of the day. I created a VM with 4 cores, a 40GB OS disk and 3x20GB data disks. Install MicroOS. Create a RAID1 BTRFS filesystem over the 3 data disks. Write some random data on them to fill them up.